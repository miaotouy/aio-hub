# 项目未来功能与重构计划 (TODO)

本文档记录了项目未来的开发方向和待办事项，用于规划和追踪长期目标。

## 阶段一：核心架构重构

- [ ] **工具结构重构 (高复杂度)**:
  - [ ] 探索并确定对现有结构破坏性最小、但收益最高的设计方案。
  - [ ] 将工具的业务逻辑与 UI 彻底分离，形成独立的、可注册的服务。
  - [ ] 设计并实现一套统一的工具注册、发现和调用机制（Service Locator / Dependency Injection）。
  - [ ] 确保重构后的架构具有良好的可扩展性和可维护性，为未来的工具调用（Function Calling）打下坚实基础。

## 阶段二：核心功能实现 (基于新架构)

- [ ] **Chat 模块功能增强**:
  - [ ] **工具调用能力**: 允许 Chat 模块调用应用内已注册的其他工具，实现 Function Calling。
  - [ ] **智能多模态文件上传**:
    - [ ] 支持在聊天节点中包含文件（图片、音视频、文档等）。
    - [ ] **模型能力甄别**: 在构建上下文时，判断当前模型是否支持处理对应的文件类型。
    - [ ] **自动降维处理**: 对于不支持多模态的模型，自动调用转写服务（如 OCR、ASR）将媒体内容转换为文本，再注入上下文，以确保兼容性。
  - [ ] **用户档案系统 (类酒馆高级版)**:
    - [ ] 创建用户档案（Profile）管理功能，支持多配置切换。
    - [ ] 支持自定义档案内容在上下文中的插入位置（如前置、后置等）。

## 阶段三：新工具开发与体验优化

### 新增独立工具

- [ ] **视频解析与归档工具**:
  - [ ] 实现对主流视频网站（如 Bilibili）的视频爬取功能。
  - [ ] 支持下载视频的字幕、弹幕和评论区内容。
  - [ ] 将解析后的文本内容进行归档，以供其他模块（如 Chat）使用。
- [ ] **酒馆内容导入工具**:
  - [ ] 参考现有设计，为项目定义一套兼容且可扩展的角色卡/场景文件格式。
  - [ ] 实现对第三方格式（如酒馆）的破坏性导入，并转换为项目自有格式。

### 用户体验 (UX/UI) 优化

- [ ] **UI/UX 整体提升**:
  - [ ] 优化整体界面布局，使其能更好地与自定义主题系统配合。
  - [ ] 提升视觉一致性和美观度。
- [ ] **国际化 (i18n)**:
  - [ ] 引入 i18n 框架。
  - [ ] 逐步将界面上的硬编码文本替换为多语言 key。
- [ ] **新手引导 (Onboarding)**:
  - [ ] 设计并开发一个初次使用时的工具列表引导界面。
  - [ ] 允许用户在设置中自定义默认显示的工具，简化主界面。
