html.dark {
  /* Custom Variables for Dark Mode - 统一使用我们自己的主题变量 */
  --bg-color: #1a1a1a;  /* 主背景色 - 深灰黑 */
  --container-bg: #242424;  /* 容器背景色 - 比主背景稍亮 */
  --text-color: #e5e5e5;  /* 主文字颜色 */
  --text-color-light: #a8a8a8;  /* 次要文字颜色 */
  --border-color: #3a3a3a;  /* 主边框颜色 */
  --border-color-light: #2f2f2f;  /* 浅边框颜色 */
  --primary-color: #409eff;  /* 主色调 - 保持 Element Plus 蓝色 */
  --primary-hover-color: #66b1ff;  /* 主色调悬停色 */
  --error-color: #ff6b6b;  /* 错误色 */
  --input-bg: #1f1f1f;  /* 输入框背景色 */
  --sidebar-bg: #242424;  /* 侧边栏背景色 */
  --sidebar-bg-rgb: 36, 36, 36;  /* 侧边栏背景RGB值用于透明度 */
  --sidebar-text: #e5e5e5;  /* 侧边栏文字色 */
  --header-bg: #2a2a2a;  /* 头部背景色 */
  --card-bg: #2a2a2a;  /* 卡片背景色 */
  --scrollbar-thumb-color: #555;  /* 滚动条颜色 */
  --scrollbar-thumb-hover-color: #777;  /* 滚动条悬停色 */

  /* Element Plus 兼容变量 - 映射到我们的主题变量 */
  --el-bg-color: var(--bg-color);
  --el-bg-color-page: var(--bg-color);
  --el-bg-color-overlay: var(--container-bg);
  --el-text-color-primary: var(--text-color);
  --el-text-color-regular: var(--text-color);
  --el-text-color-secondary: var(--text-color-light);
  --el-text-color-placeholder: var(--text-color-light);
  --el-border-color: var(--border-color);
  --el-border-color-light: var(--border-color-light);
  --el-border-color-lighter: var(--border-color-light);
  --el-border-color-extra-light: var(--border-color-light);
  --el-fill-color: var(--card-bg);
  --el-fill-color-light: var(--card-bg);
  --el-fill-color-lighter: var(--container-bg);
  --el-fill-color-blank: transparent;
  --el-color-primary: var(--primary-color);
  /* primary light 系列颜色由 themeColors.ts 动态管理，此处不再硬编码 */
  --el-color-danger: var(--error-color);
  --el-color-success: #67c23a;
  --el-color-warning: #e6a23c;
  --el-color-info: #909399;

  /* 按钮相关变量 - 修复悬停时文字颜色问题 */
  --el-button-text-color: var(--text-color);
  --el-button-hover-text-color: var(--el-color-primary-light-3);  /* 悬停时文字为主色调浅色版本 */
  --el-button-hover-bg-color: color-mix(in srgb, var(--el-color-primary) 15%, transparent);
  --el-button-hover-border-color: var(--el-color-primary);
}

/* 覆盖默认 el-button (无 type) 的样式变量 */
html.dark .el-button {
  --el-button-hover-bg-color: color-mix(in srgb, var(--el-color-primary) 15%, transparent);
  --el-button-hover-border-color: var(--el-color-primary);
  --el-button-hover-text-color: var(--el-color-primary-light-3);
}

/* 覆盖 el-button 的悬停样式 */
html.dark .el-button:hover {
  color: var(--el-color-primary-light-3);
}

html.dark .el-button:focus {
  color: var(--el-color-primary-light-3);
}

/* 覆盖 el-tag 的样式 - 使用半透明背景使其在暗色模式下更暗 */
html.dark .el-tag {
  border-color: transparent;
}

html.dark .el-tag.el-tag--primary {
  background-color: color-mix(in srgb, var(--el-color-primary) 20%, transparent);
  color: var(--el-color-primary);
  border-color: color-mix(in srgb, var(--el-color-primary) 40%, transparent);
}

html.dark .el-tag.el-tag--success {
  background-color: color-mix(in srgb, var(--el-color-success) 20%, transparent);
  color: var(--el-color-success);
  border-color: color-mix(in srgb, var(--el-color-success) 40%, transparent);
}

html.dark .el-tag.el-tag--warning {
  background-color: color-mix(in srgb, var(--el-color-warning) 20%, transparent);
  color: var(--el-color-warning);
  border-color: color-mix(in srgb, var(--el-color-warning) 40%, transparent);
}

html.dark .el-tag.el-tag--danger {
  background-color: color-mix(in srgb, var(--el-color-danger) 20%, transparent);
  color: var(--el-color-danger);
  border-color: color-mix(in srgb, var(--el-color-danger) 40%, transparent);
}

html.dark .el-tag.el-tag--info {
  background-color: color-mix(in srgb, var(--el-color-info) 20%, transparent);
  color: var(--el-color-info);
  border-color: color-mix(in srgb, var(--el-color-info) 40%, transparent);
}

/* el-tag 关闭按钮样式 */
html.dark .el-tag .el-tag__close {
  color: currentColor;
  opacity: 0.8;
}

html.dark .el-tag .el-tag__close:hover {
  opacity: 1;
  background-color: rgba(255, 255, 255, 0.15);
}

/* 按钮半透明高亮样式 - 暗色主题（使用动态颜色变量） */
html.dark .el-button--primary {
  --el-button-bg-color: color-mix(in srgb, var(--el-color-primary) 15%, transparent);
  --el-button-border-color: var(--el-color-primary);
  --el-button-text-color: var(--el-color-primary);
  --el-button-hover-bg-color: color-mix(in srgb, var(--el-color-primary) 25%, transparent);
  --el-button-hover-border-color: var(--el-color-primary-light-3);
  --el-button-hover-text-color: var(--el-color-primary-light-3);
  --el-button-active-bg-color: color-mix(in srgb, var(--el-color-primary) 35%, transparent);
  --el-button-active-border-color: var(--el-color-primary);
}

html.dark .el-button--success {
  --el-button-bg-color: color-mix(in srgb, var(--el-color-success) 15%, transparent);
  --el-button-border-color: var(--el-color-success);
  --el-button-text-color: var(--el-color-success);
  --el-button-hover-bg-color: color-mix(in srgb, var(--el-color-success) 25%, transparent);
  --el-button-hover-border-color: var(--el-color-success-light-3);
  --el-button-hover-text-color: var(--el-color-success-light-3);
  --el-button-active-bg-color: color-mix(in srgb, var(--el-color-success) 35%, transparent);
  --el-button-active-border-color: var(--el-color-success);
}

html.dark .el-button--warning {
  --el-button-bg-color: color-mix(in srgb, var(--el-color-warning) 15%, transparent);
  --el-button-border-color: var(--el-color-warning);
  --el-button-text-color: var(--el-color-warning);
  --el-button-hover-bg-color: color-mix(in srgb, var(--el-color-warning) 25%, transparent);
  --el-button-hover-border-color: var(--el-color-warning-light-3);
  --el-button-hover-text-color: var(--el-color-warning-light-3);
  --el-button-active-bg-color: color-mix(in srgb, var(--el-color-warning) 35%, transparent);
  --el-button-active-border-color: var(--el-color-warning);
}

html.dark .el-button--danger {
  --el-button-bg-color: color-mix(in srgb, var(--el-color-danger) 15%, transparent);
  --el-button-border-color: var(--el-color-danger);
  --el-button-text-color: var(--el-color-danger);
  --el-button-hover-bg-color: color-mix(in srgb, var(--el-color-danger) 25%, transparent);
  --el-button-hover-border-color: var(--el-color-danger-light-3);
  --el-button-hover-text-color: var(--el-color-danger-light-3);
  --el-button-active-bg-color: color-mix(in srgb, var(--el-color-danger) 35%, transparent);
  --el-button-active-border-color: var(--el-color-danger);
}

html.dark .el-button--info {
  --el-button-bg-color: color-mix(in srgb, var(--el-color-info) 15%, transparent);
  --el-button-border-color: var(--el-color-info);
  --el-button-text-color: var(--el-color-info);
  --el-button-hover-bg-color: color-mix(in srgb, var(--el-color-info) 25%, transparent);
  --el-button-hover-border-color: var(--el-color-info-light-3);
  --el-button-hover-text-color: var(--el-color-info-light-3);
  --el-button-active-bg-color: color-mix(in srgb, var(--el-color-info) 35%, transparent);
  --el-button-active-border-color: var(--el-color-info);
}

/* Element Plus 单选按钮组 - 暗色主题 */
html.dark .el-radio-group {
  --el-radio-text-color: var(--text-color);
  --el-radio-input-border-color: var(--border-color);
  --el-radio-input-border-color-hover: var(--primary-color);
}

html.dark .el-radio {
  --el-radio-text-color: var(--text-color);
  --el-radio-input-border-color: var(--border-color);
  --el-radio-input-border-color-hover: var(--primary-color);
}

html.dark .el-radio__input.is-checked .el-radio__inner {
  background-color: var(--primary-color);
  border-color: var(--primary-color);
}

html.dark .el-radio__label {
  color: var(--text-color);
}

/* Element Plus 单选按钮禁用状态 - 暗色主题 */
html.dark .el-radio.is-disabled .el-radio__inner {
  background-color: var(--border-color-light);
  border-color: var(--border-color);
}

html.dark .el-radio.is-disabled .el-radio__label {
  color: var(--text-color-light);
  cursor: not-allowed;
}

html.dark .el-radio.is-disabled.is-checked .el-radio__inner {
  background-color: var(--border-color);
  border-color: var(--border-color);
}

/* Element Plus 单选按钮按钮样式 - 暗色主题 */
html.dark .el-radio-button {
  --el-radio-button-checked-bg-color: color-mix(in srgb, var(--primary-color) 15%, transparent);
  --el-radio-button-checked-text-color: var(--primary-color);
  --el-radio-button-checked-border-color: var(--primary-color);
}

html.dark .el-radio-button__inner {
  background-color: var(--card-bg);
  border-color: var(--border-color);
  color: var(--text-color);
}

html.dark .el-radio-button__inner:hover {
  color: var(--primary-color);
}

html.dark .el-radio-button__original-radio:checked + .el-radio-button__inner {
  background-color: color-mix(in srgb, var(--primary-color) 15%, transparent);
  border-color: var(--primary-color);
  color: var(--primary-color);
  box-shadow: -1px 0 0 0 var(--primary-color);
}

html.dark .el-radio-button__original-radio:checked + .el-radio-button__inner:hover {
  background-color: color-mix(in srgb, var(--primary-color) 35%, transparent);
}

html.dark .el-radio-button.is-disabled .el-radio-button__inner {
  background-color: var(--border-color-light);
  border-color: var(--border-color);
  color: var(--text-color-light);
  cursor: not-allowed;
}

html.dark .el-radio-button.is-disabled .el-radio-button__original-radio:checked + .el-radio-button__inner {
  background-color: var(--border-color-light);
  border-color: var(--border-color);
  color: var(--text-color-light);
}

/* Element Plus 按钮禁用状态 - 暗色主题 */
html.dark .el-button.is-disabled,
html.dark .el-button.is-disabled:hover,
html.dark .el-button.is-disabled:focus,
html.dark .el-button.is-disabled:active {
  background-color: var(--border-color-light);
  border-color: var(--border-color);
  color: var(--text-color-light);
  cursor: not-allowed;
  opacity: 0.5;
}

html.dark .el-button--primary.is-disabled,
html.dark .el-button--primary.is-disabled:hover {
  --el-button-bg-color: var(--border-color-light);
  --el-button-border-color: var(--border-color);
  --el-button-text-color: var(--text-color-light);
}

html.dark .el-button--success.is-disabled,
html.dark .el-button--success.is-disabled:hover {
  --el-button-bg-color: var(--border-color-light);
  --el-button-border-color: var(--border-color);
  --el-button-text-color: var(--text-color-light);
}

html.dark .el-button--warning.is-disabled,
html.dark .el-button--warning.is-disabled:hover {
  --el-button-bg-color: var(--border-color-light);
  --el-button-border-color: var(--border-color);
  --el-button-text-color: var(--text-color-light);
}

html.dark .el-button--danger.is-disabled,
html.dark .el-button--danger.is-disabled:hover {
  --el-button-bg-color: var(--border-color-light);
  --el-button-border-color: var(--border-color);
  --el-button-text-color: var(--text-color-light);
}

html.dark .el-button--info.is-disabled,
html.dark .el-button--info.is-disabled:hover {
  --el-button-bg-color: var(--border-color-light);
  --el-button-border-color: var(--border-color);
  --el-button-text-color: var(--text-color-light);
}

/* Custom global button styles - dark mode */
html.dark .btn-primary {
  background-color: color-mix(in srgb, var(--primary-color) 15%, transparent);
  border-color: var(--primary-color);
  color: var(--primary-color);
}
html.dark .btn-primary:hover {
  background-color: color-mix(in srgb, var(--primary-color) 25%, transparent);
  color: var(--primary-hover-color);
  border-color: var(--primary-hover-color);
}

html.dark .btn-secondary {
  background-color: var(--card-bg);
  border-color: var(--border-color);
  color: var(--text-color);
}
html.dark .btn-secondary:hover {
  background-color: var(--border-color-light);
  border-color: var(--primary-color);
}

html.dark .btn-warning {
  background-color: color-mix(in srgb, var(--el-color-warning) 15%, transparent);
  border-color: var(--el-color-warning);
  color: var(--el-color-warning);
}
html.dark .btn-warning:hover {
  background-color: color-mix(in srgb, var(--el-color-warning) 25%, transparent);
}

html.dark .btn-danger {
  background-color: color-mix(in srgb, var(--el-color-danger) 15%, transparent);
  border-color: var(--el-color-danger);
  color: var(--el-color-danger);
}
html.dark .btn-danger:hover {
  background-color: color-mix(in srgb, var(--el-color-danger) 25%, transparent);
}

html.dark .btn-info {
  background-color: color-mix(in srgb, var(--el-color-info) 15%, transparent);
  border-color: var(--el-color-info);
  color: var(--el-color-info);
}
html.dark .btn-info:hover {
  background-color: color-mix(in srgb, var(--el-color-info) 25%, transparent);
}

/* el-message 样式修复 - 半透明样式 */
html.dark .el-message--success {
  --el-message-bg-color: color-mix(in srgb, var(--el-color-success) 15%, transparent);
  --el-message-text-color: var(--el-color-success);
  --el-message-border-color: color-mix(in srgb, var(--el-color-success) 40%, transparent);
  --el-message-close-color: var(--el-color-success);
}

html.dark .el-message--warning {
  --el-message-bg-color: color-mix(in srgb, var(--el-color-warning) 15%, transparent);
  --el-message-text-color: var(--el-color-warning);
  --el-message-border-color: color-mix(in srgb, var(--el-color-warning) 40%, transparent);
  --el-message-close-color: var(--el-color-warning);
}

html.dark .el-message--error {
  --el-message-bg-color: color-mix(in srgb, var(--el-color-danger) 15%, transparent);
  --el-message-text-color: var(--el-color-danger);
  --el-message-border-color: color-mix(in srgb, var(--el-color-danger) 40%, transparent);
  --el-message-close-color: var(--el-color-danger);
}

html.dark .el-message--info {
  --el-message-bg-color: color-mix(in srgb, var(--el-color-info) 15%, transparent);
  --el-message-text-color: var(--el-color-info);
  --el-message-border-color: color-mix(in srgb, var(--el-color-info) 40%, transparent);
  --el-message-close-color: var(--el-color-info);
}

/* el-alert 样式修复 - 半透明样式 */
html.dark .el-alert--success {
  --el-alert-bg-color: color-mix(in srgb, var(--el-color-success) 15%, transparent);
  --el-alert-text-color: var(--el-color-success);
  --el-alert-border-color: color-mix(in srgb, var(--el-color-success) 40%, transparent);
}

html.dark .el-alert--success .el-alert__description,
html.dark .el-alert--success .el-alert__title {
  color: var(--el-color-success);
}

html.dark .el-alert--warning {
  --el-alert-bg-color: color-mix(in srgb, var(--el-color-warning) 15%, transparent);
  --el-alert-text-color: var(--el-color-warning);
  --el-alert-border-color: color-mix(in srgb, var(--el-color-warning) 40%, transparent);
}

html.dark .el-alert--warning .el-alert__description,
html.dark .el-alert--warning .el-alert__title {
  color: var(--el-color-warning);
}

html.dark .el-alert--error {
  --el-alert-bg-color: color-mix(in srgb, var(--el-color-danger) 15%, transparent);
  --el-alert-text-color: var(--el-color-danger);
  --el-alert-border-color: color-mix(in srgb, var(--el-color-danger) 40%, transparent);
}

html.dark .el-alert--error .el-alert__description,
html.dark .el-alert--error .el-alert__title {
  color: var(--el-color-danger);
}

html.dark .el-alert--info {
  --el-alert-bg-color: color-mix(in srgb, var(--el-color-info) 15%, transparent);
  --el-alert-text-color: var(--el-color-info);
  --el-alert-border-color: color-mix(in srgb, var(--el-color-info) 40%, transparent);
}

html.dark .el-alert--info .el-alert__description,
html.dark .el-alert--info .el-alert__title {
  color: var(--el-color-info);
}

/* el-alert 关闭按钮样式 */
html.dark .el-alert__close-btn {
  color: var(--text-color);
}

html.dark .el-alert__close-btn:hover {
  opacity: 0.7;
}

/* 单色图标在暗色模式下反色 */
.invert-on-dark {
  filter: invert(1);
}

/* 修复 el-dropdown 在暗色模式下悬停时的样式 - 使用半透明背景和白色文字 */
html.dark .el-dropdown-menu__item:focus,
html.dark .el-dropdown-menu__item:not(.is-disabled):hover {
  background-color: color-mix(in srgb, var(--el-color-primary) 25%, transparent);
  color: #ffffff;
}

/* Element Plus Tooltip 主题适配 - 暗色模式 */
/* 使用 .el-popper 选择器覆盖 Element Plus 默认样式 */
html.dark .el-popper.is-dark {
  background-color: var(--container-bg);
  color: var(--text-color);
  border-color: var(--border-color);
}

html.dark .el-popper.is-dark > .el-popper__arrow::before {
  background: var(--container-bg);
  border: 1px solid var(--border-color);
}

html.dark .el-popper.is-light {
  background-color: var(--container-bg);
  color: var(--text-color);
  border: 1px solid var(--border-color);
}

html.dark .el-popper.is-light > .el-popper__arrow::before {
  background: var(--container-bg);
  border: 1px solid var(--border-color);
}

/* 箭头方向颜色 - dark 模式 */
html.dark .el-popper.is-dark[data-popper-placement^='top'] .el-popper__arrow::before {
  border-top-color: var(--container-bg);
}

html.dark .el-popper.is-dark[data-popper-placement^='bottom'] .el-popper__arrow::before {
  border-bottom-color: var(--container-bg);
}

html.dark .el-popper.is-dark[data-popper-placement^='left'] .el-popper__arrow::before {
  border-left-color: var(--container-bg);
}

html.dark .el-popper.is-dark[data-popper-placement^='right'] .el-popper__arrow::before {
  border-right-color: var(--container-bg);
}

/* 箭头方向颜色 - light 模式 */
html.dark .el-popper.is-light[data-popper-placement^='top'] .el-popper__arrow::before {
  border-top-color: var(--container-bg);
}

html.dark .el-popper.is-light[data-popper-placement^='bottom'] .el-popper__arrow::before {
  border-bottom-color: var(--container-bg);
}

html.dark .el-popper.is-light[data-popper-placement^='left'] .el-popper__arrow::before {
  border-left-color: var(--container-bg);
}

html.dark .el-popper.is-light[data-popper-placement^='right'] .el-popper__arrow::before {
  border-right-color: var(--container-bg);
}