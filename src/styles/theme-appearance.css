/**
 * 主题外观增强样式
 * 包含壁纸、透明度、模糊效果等相关的 CSS 变量和类
 */

:root {
  /* --- 核心变量 (由 JS 动态更新) --- */
  --ui-blur: 15px;
  --wallpaper-image: none;
  --wallpaper-opacity: 1;
  --window-bg-opacity: 1;
  --bg-color-opacity: 1; /* 应用背景色不透明度 */
  --border-opacity: 0.9; /* 边线不透明度 */
  --card-bg-rgb: 255, 255, 255; /* 默认亮色主题的卡片背景 RGB */

  /*
    透明度变量 (如 --card-opacity, --sidebar-opacity 等)
    现在完全由 useThemeAppearance.ts 动态计算并注入，
    以确保与 UI 设置实时同步。
  */
}

html.dark {
  --card-bg-rgb: 42, 42, 42; /* 暗色主题的卡片背景 RGB */
}

/* ========================================================================== */
/* 全局背景和壁纸
/* ========================================================================== */

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: var(--wallpaper-image);
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  opacity: var(--wallpaper-opacity);
  z-index: -2; /* 确保在所有内容之下 */
}

/* 应用窗口本身的背景色，当启用窗口特效时，它需要是半透明的 */
html, body {
  background-color: rgba(var(--bg-color-rgb), var(--bg-color-opacity));
}

/* ========================================================================== */
/* 可复用工具类
/* ========================================================================== */

/**
 * 通用毛玻璃效果
 * 将这个类应用到需要模糊背景的组件上
 */
.glass-effect {
  backdrop-filter: blur(var(--ui-blur));
  -webkit-backdrop-filter: blur(var(--ui-blur));
}

/**
 * 卡片毛玻璃效果
 * 专为卡片类组件设计，使用由 JS 注入的 --card-opacity 变量
 */
.glass-card {
  background-color: rgba(var(--card-bg-rgb), var(--card-opacity)) !important;
  backdrop-filter: blur(var(--ui-blur));
  -webkit-backdrop-filter: blur(var(--ui-blur));
}

/**
 * 侧边栏毛玻璃效果
 * 专为侧边栏设计，使用由 JS 注入的 --sidebar-opacity 变量
 */
.glass-sidebar {
  background-color: rgba(var(--sidebar-bg-rgb, var(--card-bg-rgb)), var(--sidebar-opacity)) !important;
  backdrop-filter: blur(var(--ui-blur));
  -webkit-backdrop-filter: blur(var(--ui-blur));
}

/**
 * 弹窗/覆盖层毛玻璃效果
 * 专为 Dialog, Popover, Dropdown 等设计，使用由 JS 注入的 --overlay-opacity 变量
 */
.glass-overlay {
  background-color: rgba(var(--container-bg-rgb), var(--overlay-opacity)) !important;
  backdrop-filter: blur(var(--ui-blur));
  -webkit-backdrop-filter: blur(var(--ui-blur));
}